{% extends 'layout.html' %}
{% block content %}
<h2>Budgets</h2>
<form method="post" class="card">
  <div class="row">
    <label>Category <input name="category" required></label>
    <label>Amount <input name="amount" type="number" step="0.01" required></label>
  </div>
  <button>Set/Update</button>
  <p class="muted">Set amount to 0 to remove a budget.</p>
</form>

<table>
  <thead><tr><th>Category</th><th>Budget</th></tr></thead>
  <tbody>
  {% for cat, amt in budgets.items() %}
    <tr><td>{{ cat }}</td><td>{{ '%.2f'|format(amt) }}</td></tr>
  {% endfor %}
  </tbody>
</table>

{% if alerts %}
<h3>Alerts</h3>
<table>
  <thead><tr><th>Category</th><th>Spent</th><th>Budget</th><th>Status</th></tr></thead>
  <tbody>
  {% for cat, spent, budget, status in alerts %}
    <tr class="{{ status == 'exceeded' and 'danger' or 'warn' }}">
      <td>{{ cat }}</td>
      <td>{{ '%.2f'|format(spent) }}</td>
      <td>{{ '%.2f'|format(budget) }}</td>
      <td>{{ status }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endif %}
{% endblock %}
